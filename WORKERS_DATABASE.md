# מדריך מסד נתוני עובדים

## סקירה כללית
מערכת ההסעות שלך משתמשת כעת בקובץ JSON (`workers.json`) לשמירת כל מידע העובדים והנהגים, כולל שמות משתמש וסיסמאות.

## מבנה הקובץ

### workers.json
```json
{
  "employees": [...],
  "drivers": [...]
}
```

### מבנה אובייקט עובד
כל עובד כולל את השדות הבאים:
- `id` - מזהה ייחודי (מספר)
- `name` - שם מלא בעברית
- `address` - כתובת רחוב
- `city` - שם עיר
- `phone` - מספר טלפון
- `route` - שם מסלול (למשל, "מסלול א")
- `time` - שעת איסוף (פורמט HH:MM)
- `department` - שם מחלקה (אופציונלי)
- `company` - שם חברה (אופציונלי)
- `active` - בוליאני (true/false)
- `username` - שם משתמש להתחברות
- `password` - סיסמה להתחברות

## איך זה עובד

1. **בעת טעינת האפליקציה**:
   - האפליקציה מנסה לטעון מ-localStorage תחילה (תמיכה במצב לא מקוון)
   - לאחר מכן שולפת נתונים עדכניים מ-`workers.json`
   - שומרת ל-localStorage לגישה במצב לא מקוון

2. **שמירת נתונים**:
   - כל שינוי (הוספה/עריכה/מחיקת עובדים) נשמר ל-localStorage
   - הקובץ המקורי `workers.json` לא מתעדכן אוטומטית
   - עליך לעדכן ידנית את `workers.json` כדי לבצע שינויים קבועים

## ניהול עובדים

### הוספת עובד חדש
1. פתח את `workers.json` בעורך טקסט
2. הוסף אובייקט עובד חדש למערך `employees`:
```json
{
  "id": 10,
  "name": "שם חדש",
  "address": "כתובת",
  "city": "מודיעין",
  "phone": "052-123-4567",
  "route": "מסלול א",
  "time": "07:00",
  "department": "מחלקה",
  "active": true,
  "username": "שם משפחה",
  "password": "1234"
}
```
3. שמור את הקובץ
4. רענן את האפליקציה

### שינוי סיסמה
1. פתח את `workers.json`
2. מצא את העובד לפי `id` או `name`
3. עדכן את השדה `password`
4. שמור ורענן

### סיסמה ברירת מחדל
עובדים ללא סיסמה מותאמת אישית ישתמשו בברירת המחדל: `1234`

## הערות אבטחה

⚠️ **חשוב**:
- הסיסמאות כרגע מאוחסנות ב**טקסט פשוט** - זה לא מאובטח!
- כל מי שיש לו גישה ל-`workers.json` יכול לראות את כל הסיסמאות
- לשימוש בייצור, שקול ליישם:
  - הצפנת סיסמאות (bcrypt, argon2)
  - שרת backend לאימות
  - אחסון מוצפן

## טיפים

- שמור גיבוי של `workers.json`
- השתמש במזהים ייחודיים לכל עובד
- תמיד בדוק שינויים בסביבת פיתוח תחילה
- שקול בקרת גרסאות (Git) למעקב אחר שינויים ב-`workers.json`

## פתרון בעיות

**שגיאה: "שגיאה בטעינת נתוני עובדים"**
- בדוק ש-`workers.json` קיים באותה תיקייה כמו `index.html`
- וודא שתחביר ה-JSON תקין (השתמש במאמת JSON)
- בדוק את קונסולת הדפדפן להודעות שגיאה מפורטות

**התחברות לא עובדת**
- וודא ששם המשתמש תואם לשדה `username` ב-`workers.json`
- בדוק שהסיסמה נכונה (רגישה לאותיות גדולות/קטנות)
- נקה את מטמון הדפדפן וה-localStorage, ואז רענן

**שינויים לא נשמרים**
- שינויים שנעשו דרך ממשק האפליקציה נשמרים רק ל-localStorage
- לביצוע שינויים קבועים, ערוך את `workers.json` ישירות
- לאחר עריכת `workers.json`, נקה את localStorage לכפות טעינה מחדש
